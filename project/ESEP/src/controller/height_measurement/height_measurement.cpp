#include "src/controller/height_measurement/height_measurement.h"

#define UNDEFINED 576
#define MAX_HEIGHT 2200
#define GROUND_HEIGHT 3980
#define INIT_HEIGHT 4018
#define MAX_LENGTH 850
#define MIN_LENGTH 5
#define SUM_IC_WM 3
#define SMALLEST_ABS_ERROR 18000
#define PROTOTYPE_LENGTH 360
#define CUT_OFF_FRONT 12
#define SUM_PUKS 10
#define STOPPED 1

static uint32_t last_type;
static bool is_stopped;
static int32_t height_diff;

static uint32_t const INVALID_PUK_TYPE_ID_E = 12345;
static uint32_t const HM_START_EVENT_ID_E = 54321;
static uint32_t const HM_DONE_EVENT_ID_E = 264864;

uint32_t Height_Measurement::profiles[10][550] = {
		/* 0 iron_core */        { 2997, 2964, 2971, 2926, 2900, 2826, 2824, 2797, 2775, 2754, 2739, 2707, 2681, 2665, 2645, 2623, 2609, 2585, 2571, 2554, 2544, 2547, 2543, 2540, 2530, 2514, 2508, 2512, 2505, 2499, 2502, 2505, 2497, 2497, 2503, 2503, 2506, 2501, 2499, 2495, 2500, 2498, 2489, 2490, 2493, 2490, 2490, 2497, 2500, 2501, 2496, 2500, 2500, 2501, 2489, 2490, 2497, 2496, 2490, 2486, 2481, 2475, 2479, 2480, 2483, 2479, 2473, 2467, 2470, 2474, 2481, 2479, 2483, 2480, 2488, 2488, 2486, 2487, 2492, 2483, 2477, 2477, 2478, 2484, 2481, 2477, 2477, 2474, 2480, 2485, 2485, 2487, 2492, 2482, 2480, 2474, 2475, 2482, 2485, 2487, 2485, 2487, 2485, 2479, 2484, 2484, 2485, 2474, 2472, 2477, 2478, 2484, 2485, 2481, 2477, 2479, 2478, 2486, 2485, 2485, 2480, 2476, 2477, 2469, 2476, 2476, 2478, 2473, 2469, 2469, 2473, 2476, 2480, 2474, 2473, 2475, 2469, 2472, 2473, 2476, 2485, 2479, 2485, 2485, 2492, 2490, 2491, 2483, 2469, 2473, 2473, 2478, 2482, 2478, 2480, 2480, 2475, 2472, 2474, 2477, 2480, 2469, 2464, 2465, 2471, 2465, 2463, 2456, 2465, 2462, 2468, 2477, 2498, 2508, 2505, 2507, 2505, 2505, 2501, 2508, 2504, 2489, 2481, 2475, 2475, 2472, 2472, 2482, 2488, 2493, 2505, 2517, 2537, 2540, 2542, 2553, 2556, 2553, 2547, 2550, 2545, 2540, 2538, 2535, 2532, 2534, 2532, 2535, 2534, 2532, 2531, 2534, 2533, 2528, 2521, 2517, 2517, 2515, 2517, 2524, 2529, 2524, 2519, 2507, 2494, 2481, 2471, 2458, 2456, 2440, 2429, 2431, 2420, 2416, 2418, 2414, 2400, 2402, 2410, 3634, 3627, 3619, 3607, 3601, 3594, 3597, 3590, 3593, 3588, 3585, 3582, 3580, 3578, 3579, 3580, 3584, 3577, 3571, 3568, 3569, 3569, 3566, 3571, 3573, 3568, 3562, 3562, 3565, 3563, 3568, 3556, 3552, 3553, 3557, 3560, 3559, 3559, 3566, 3559, 3561, 3557, 3561, 3563, 3561, 3560, 3560, 3553, 3551, 3557, 3560, 3562, 3566, 3565, 3570, 3566, 3564, 3564, 3567, 3564, 3562, 3553, 3565, 3571, 3563, 3567, 3566, 3569, 3567, 3563, 3566, 3569, 3574, 3565, 3567, 3566, 3563, 3564, 3570, 3572, 3569, 3566, 3570, 3565, 3567, 3568, 3580, 3570, 3570, 3571, 3574, 3572, 3574, 3569, 3564, 3565, 3569, 3565, 3560, 3562, 3566, 3568, 3568, 3564, 3569, 3569, 3571, 3565, 3570, 3570, 3567, 3567, 3573, 3571, 3568, 3560, 3559, 3567, 3566, 3565, 3564, 3559, 3557, 3554, 3558, 3559, 3561, 3558, 3559, 3557, 3557, 3561, 3557, 3561, 3557, 3558, 3556, 3553, 3553, 3555, 3563, 3555, 3554, 3549, 3554, 3555, 3555, 3560, 3559, 3557, 3557, 3558, 3558, 3557, 3560, 3560, 3557, 3552, 3555, 3565, 3563, 3558, 3556, 3557, 3555, 3551, 3547, 3555, 3547, 3549, 3537, 3537, 3549, 3558, 3560, 3564, 3571, 3576, 3578, 3581, 3592, 3589, 3595, 3586, 3577, 3567, 3561, 3552, 3543, 3516, 3509, 3505, 3489, 3482, 3483, 3476, 3453, 3455, 3453, 3465, 3474, 3473, 3462, 3475, 3476, 3485, 3495, 3503, 3499, 3515, 3501, 3504, 3498, 3693, 2348, 2344, 2325, 2311, 2308, 2313, 2305, 2310, 2319, 2325, 2331, 2339, 2344, 2350, 2364, 2378, 2386, 2399, 2406, 2418, 2428, 2426, 2424, 2417, 2409, 2404, 2412, 2425, 2440, 2450, 2460, 2463, 2473, 2491, 2518, 2532, 2538, 2549, 2540, 2521, 2511, 2479, 2453, 2449, 2472, 2474, 2471, 2460, 2469, 2471, 2511, 2530, 2526, 2535, 2533, 2523, 2510, 2489, 2480, 2483, 2476, 2485, 2493, 2494, 2489, 2493, 2499, 2509, 2503, 2491, 2481, 2461, 2452, 2438, 2428, 2428, 2425, 2415, 2413, 2411, 2424, 2436, 2439, 2443, 2442, 2444, 2449, 2450, 2458, 2461, 2463, 2460, 2454, 2463, 2461, 2460, 2465 },
		/* 1 iron_core_wmf */    { 3761, 3739, 3711, 3552, 2895, 2834, 2790, 2753, 3255, 2732, 2714, 2676, 2657, 2632, 2611, 2596, 2572, 2549, 2541, 2537, 2534, 2536, 2531, 2522, 2515, 2509, 2501, 2498, 2501, 2500, 2493, 2493, 2487, 2487, 2485, 2492, 2497, 2488, 2489, 2486, 2487, 2489, 2492, 2482, 2475, 2469, 2468, 2469, 2471, 2478, 2476, 2481, 2481, 2474, 2473, 2467, 2475, 2475, 2475, 2472, 2472, 2469, 2466, 2468, 2476, 2473, 2463, 2461, 2464, 2461, 2466, 2473, 2472, 2468, 2467, 2475, 2481, 2480, 2484, 2485, 2482, 2477, 2473, 2478, 2478, 2485, 2484, 2478, 2484, 2489, 2484, 2485, 2483, 2483, 2486, 2480, 2477, 2476, 2480, 2480, 2484, 2482, 2476, 2468, 2471, 2470, 2473, 2473, 2465, 2463, 2464, 2472, 2473, 2479, 2482, 2478, 2475, 2479, 2473, 2479, 2474, 2477, 2470, 2472, 2466, 2470, 2473, 2480, 2469, 2470, 2471, 2478, 2478, 2473, 2471, 2467, 2463, 2463, 2470, 2469, 2473, 2476, 2466, 2461, 2461, 2466, 2469, 2474, 2476, 2473, 2473, 2474, 2475, 2480, 2473, 2478, 2480, 2470, 2474, 2477, 2478, 2478, 2476, 2471, 2473, 2476, 2483, 2491, 2506, 2512, 2507, 2509, 2509, 2511, 2510, 2505, 2503, 2500, 2493, 2487, 2493, 2497, 2510, 2515, 2529, 2529, 2539, 2548, 2561, 2571, 2572, 2570, 2571, 2571, 2565, 2563, 2558, 2548, 2543, 2537, 2531, 2537, 2539, 2537, 2532, 2529, 2523, 2520, 2517, 2519, 2525, 2521, 2520, 2518, 2513, 2511, 2508, 2503, 2496, 2476, 2462, 2454, 2444, 2437, 2430, 2421, 2415, 2409, 2404, 2410, 2412, 2408, 2412, 3618, 3610, 3606, 3595, 3595, 3597, 3593, 3589, 3590, 3580, 3582, 3580, 3581, 3582, 3581, 3575, 3576, 3582, 3577, 3575, 3571, 3571, 3567, 3567, 3565, 3566, 3562, 3560, 3559, 3558, 3561, 3563, 3562, 3564, 3554, 3552, 3554, 3560, 3557, 3555, 3555, 3554, 3557, 3557, 3558, 3560, 3561, 3560, 3550, 3548, 3551, 3554, 3561, 3557, 3560, 3553, 3557, 3560, 3557, 3562, 3562, 3553, 3551, 3551, 3556, 3563, 3561, 3566, 3565, 3562, 3554, 3557, 3562, 3564, 3560, 3551, 3553, 3555, 3555, 3559, 3558, 3565, 3560, 3564, 3562, 3562, 3558, 3561, 3568, 3561, 3559, 3554, 3557, 3559, 3569, 3565, 3563, 3561, 3559, 3560, 3555, 3553, 3561, 3553, 3546, 3546, 3554, 3555, 3547, 3550, 3544, 3548, 3552, 3551, 3546, 3553, 3558, 3555, 3552, 3552, 3558, 3557, 3553, 3558, 3555, 3546, 3547, 3546, 3552, 3544, 3546, 3549, 3537, 3539, 3545, 3550, 3546, 3543, 3547, 3549, 3552, 3553, 3551, 3555, 3556, 3552, 3550, 3548, 3556, 3556, 3555, 3556, 3550, 3548, 3556, 3550, 3545, 3550, 3553, 3538, 3536, 3544, 3543, 3542, 3541, 3545, 3542, 3541, 3534, 3535, 3538, 3534, 3540, 3542, 3539, 3536, 3546, 3558, 3561, 3563, 3570, 3572, 3576, 3583, 3579, 3582, 3578, 3568, 3563, 3538, 3520, 3516, 3508, 3490, 3469, 3465, 3448, 3443, 3433, 3433, 3445, 3451, 3445, 3439, 3436, 3439, 3440, 3464, 3474, 3496, 3510, 3515, 3519, 3528, 3539, 3561, 3570, 2398, 2347, 2331, 2325, 2311, 2299, 2283, 2297, 2305, 2312, 2343, 2356, 2361, 2365, 2379, 2394, 2420, 2435, 2455, 2453, 2448, 2441, 2441, 2456, 2468, 2467, 2473, 2475, 2489, 2512, 2525, 2534, 2538, 2534, 2544, 2543, 2533, 2522, 2510, 2497, 2478, 2465, 2463, 2456, 2457, 2447, 2451, 2448, 2457, 2464, 2471, 2449, 2456, 2449, 2433, 2434, 2430, 2433, 2441, 2456, 2463, 2470, 2476, 2480, 2491, 2487, 2491, 2492, 2481, 2463, 2441, 2432, 2422, 2426, 2419, 2421, 2420, 2418, 2417, 2422, 2431, 2432, 2433, 2432, 2433, 2425, 2426, 2430, 2426, 2423, 2411, 2399, 2395, 2386, 2387, 2390, 2383, 2380, 2372, 2383 },
		/* 2 iron_core_wmb */    { 3755, 3723, 3694, 2989, 2931, 2876, 2811, 2753, 2749, 2738, 2701, 2682, 2648, 2634, 2600, 2589, 2580, 2559, 2557, 2543, 2546, 2539, 2528, 2533, 2533, 2529, 2512, 2508, 2493, 2492, 2493, 2493, 2495, 2493, 2496, 2494, 2490, 2496, 2486, 2486, 2488, 2477, 2476, 2472, 2475, 2472, 2473, 2474, 2470, 2469, 2468, 2471, 2473, 2465, 2468, 2463, 2460, 2465, 2468, 2475, 2474, 2479, 2482, 2481, 2482, 2475, 2483, 2483, 2475, 2471, 2480, 2490, 2489, 2485, 2481, 2485, 2486, 2488, 2490, 2484, 2481, 2479, 2478, 2477, 2480, 2473, 2472, 2475, 2474, 2470, 2476, 2484, 2486, 2484, 2486, 2477, 2475, 2477, 2483, 2475, 2475, 2475, 2470, 2471, 2470, 2475, 2473, 2485, 2478, 2475, 2478, 2474, 2481, 2482, 2479, 2486, 2475, 2475, 2477, 2481, 2476, 2475, 2478, 2476, 2478, 2482, 2485, 2484, 2480, 2480, 2477, 2479, 2476, 2480, 2485, 2489, 2487, 2491, 2489, 2492, 2494, 2499, 2498, 2494, 2494, 2494, 2497, 2495, 2489, 2480, 2481, 2481, 2485, 2490, 2483, 2484, 2486, 2486, 2486, 2487, 2492, 2484, 2479, 2479, 2474, 2469, 2471, 2481, 2484, 2492, 2500, 2511, 2510, 2506, 2513, 2513, 2502, 2500, 2494, 2493, 2496, 2496, 2487, 2483, 2484, 2487, 2499, 2499, 2512, 2515, 2522, 2524, 2534, 2539, 2544, 2549, 2547, 2539, 2543, 2543, 2547, 2551, 2557, 2558, 2554, 2565, 2551, 2555, 2558, 2555, 2549, 2542, 2539, 2543, 2541, 2546, 2541, 2537, 2535, 2515, 2509, 2506, 2499, 2487, 2470, 2463, 2454, 2448, 2440, 2440, 2429, 2431, 2416, 2418, 2433, 2433, 2614, 3622, 3610, 3603, 3600, 3596, 3599, 3598, 3593, 3594, 3587, 3585, 3588, 3590, 3587, 3583, 3584, 3580, 3577, 3577, 3582, 3580, 3576, 3571, 3574, 3579, 3577, 3571, 3574, 3568, 3567, 3566, 3567, 3572, 3573, 3565, 3557, 3558, 3561, 3562, 3568, 3558, 3559, 3563, 3565, 3561, 3561, 3560, 3562, 3558, 3561, 3557, 3557, 3557, 3571, 3576, 3568, 3568, 3561, 3567, 3576, 3575, 3568, 3569, 3566, 3567, 3569, 3572, 3573, 3571, 3570, 3574, 3567, 3576, 3575, 3570, 3576, 3569, 3563, 3561, 3564, 3569, 3568, 3568, 3565, 3565, 3564, 3569, 3563, 3569, 3571, 3566, 3564, 3564, 3569, 3571, 3568, 3566, 3567, 3568, 3568, 3565, 3565, 3567, 3564, 3564, 3559, 3556, 3561, 3567, 3569, 3562, 3562, 3564, 3562, 3564, 3569, 3564, 3558, 3561, 3554, 3556, 3560, 3565, 3561, 3562, 3561, 3561, 3558, 3560, 3560, 3557, 3550, 3551, 3557, 3566, 3562, 3560, 3565, 3560, 3558, 3554, 3558, 3562, 3561, 3551, 3553, 3558, 3557, 3562, 3560, 3557, 3556, 3555, 3558, 3558, 3556, 3555, 3553, 3551, 3555, 3554, 3554, 3546, 3540, 3535, 3539, 3541, 3538, 3533, 3539, 3530, 3527, 3533, 3534, 3534, 3542, 3544, 3542, 3548, 3553, 3557, 3556, 3556, 3556, 3563, 3574, 3584, 3589, 3588, 3591, 3581, 3579, 3570, 3553, 3545, 3525, 3508, 3489, 3475, 3458, 3454, 3456, 3449, 3447, 3436, 3444, 3450, 3452, 3463, 3466, 3479, 3480, 3496, 3504, 3517, 3528, 3533, 3550, 3548, 3542, 3557, 3576, 2379, 2356, 2336, 2341, 2348, 2332, 2329, 2329, 2334, 2344, 2363, 2375, 2380, 2385, 2401, 2417, 2432, 2444, 2453, 2450, 2443, 2437, 2439, 2447, 2454, 2451, 2454, 2459, 2461, 2471, 2494, 2542, 2563, 2595, 2601, 2599, 2596, 2596, 2608, 2608, 2603, 2595, 2599, 2600, 2601, 2602, 2597, 2598, 2591, 2573, 2555, 2538, 2520, 2497, 2492, 2486, 2479, 2501, 2504, 2501, 2510, 2517, 2521, 2518, 2524, 2526, 2520, 2509, 2501, 2496, 2493, 2481, 2476, 2479, 2454, 2455, 2461, 2467, 2473, 2462, 2456, 2450, 2445, 2443, 2445, 2448, 2457, 2461, 2462, 2473, 2491 },
		/* 3 little_one */       { 2987, 2950, 2929, 2892, 2875, 2854, 2836, 2817, 2820, 2801, 2781, 2779, 2777, 2768, 2767, 2771, 2756, 2747, 2745, 2741, 2743, 2739, 2739, 2740, 2744, 2733, 2729, 2733, 2729, 2729, 2726, 2728, 2728, 2733, 2732, 2727, 2720, 2727, 2726, 2725, 2729, 2733, 2729, 2721, 2729, 2725, 2730, 2733, 2731, 2728, 2729, 2729, 2727, 2723, 2733, 2727, 2728, 2718, 2718, 2719, 2720, 2720, 2717, 2718, 2719, 2723, 2721, 2718, 2718, 2721, 2717, 2716, 2721, 2724, 2729, 2729, 2723, 2728, 2730, 2724, 2729, 2731, 2728, 2724, 2724, 2729, 2732, 2733, 2737, 2732, 2728, 2729, 2731, 2729, 2730, 2733, 2726, 2728, 2720, 2725, 2723, 2724, 2731, 2728, 2724, 2722, 2728, 2729, 2730, 2732, 2735, 2731, 2726, 2734, 2739, 2732, 2732, 2726, 2734, 2738, 2734, 2733, 2733, 2726, 2722, 2717, 2713, 2721, 2718, 2718, 2715, 2714, 2709, 2717, 2721, 2727, 2731, 2728, 2723, 2724, 2730, 2734, 2734, 2735, 2731, 2735, 2731, 2735, 2735, 2734, 2732, 2729, 2726, 2718, 2725, 2729, 2723, 2723, 2725, 2726, 2725, 2722, 2727, 2723, 2723, 2718, 2719, 2730, 2728, 2725, 2728, 2733, 2736, 2736, 2743, 2745, 2750, 2750, 2749, 2745, 2736, 2735, 2729, 2729, 2729, 2729, 2726, 2725, 2721, 2728, 2730, 2728, 2733, 2735, 2732, 2733, 2734, 2734, 2732, 2724, 2722, 2727, 2726, 2724, 2729, 2733, 2723, 2717, 2718, 2721, 2723, 2726, 2721, 2723, 2728, 2723, 2727, 2721, 2736, 2729, 2726, 2724, 2729, 2737, 2740, 2743, 2738, 2734, 2732, 2741, 2738, 2735, 2740, 2732, 2734, 2735, 2731, 2735, 2735, 2739, 2734, 2730, 2732, 2730, 2733, 2727, 2729, 2727, 2723, 2723, 2726, 2734, 2729, 2728, 2727, 2728, 2728, 2731, 2731, 2732, 2734, 2723, 2726, 2728, 2734, 2737, 2732, 2733, 2730, 2730, 2735, 2729, 2731, 2734, 2726, 2724, 2720, 2726, 2727, 2722, 2723, 2718, 2717, 2720, 2717, 2720, 2723, 2724, 2719, 2711, 2714, 2717, 2717, 2720, 2724, 2719, 2720, 2722, 2723, 2724, 2722, 2721, 2721, 2718, 2720, 2727, 2727, 2721, 2724, 2729, 2726, 2721, 2725, 2729, 2728, 2723, 2717, 2726, 2726, 2732, 2737, 2730, 2729, 2725, 2722, 2723, 2717, 2719, 2719, 2713, 2710, 2717, 2725, 2730, 2733, 2731, 2728, 2733, 2739, 2746, 2746, 2747, 2740, 2737, 2739, 2748, 2749, 2748, 2746, 2743, 2738, 2733, 2730, 2731, 2730, 2729, 2724, 2721, 2719, 2720, 2730, 2731, 2730, 2726, 2732, 2732, 2733, 2731, 2734, 2740, 2732, 2731, 2729, 2731, 2738, 2739, 2739, 2740, 2739, 2737, 2737, 2737, 2732, 2732, 2732, 2734, 2741, 2742, 2736, 2734, 2736, 2741, 2732, 2727, 2732, 2732, 2736, 2734, 2735, 2739, 2742, 2743, 2740, 2741, 2744, 2740, 2746, 2744, 2742, 2743, 2732, 2729, 2727, 2736, 2734, 2737, 2731, 2729, 2729, 2732, 2733, 2739, 2738, 2741, 2733, 2729, 2734, 2736, 2738, 2736, 2741, 2736, 2743, 2749, 2754, 2747, 2751, 2747, 2740, 2733, 2740, 2744, 2735, 2734, 2731, 2731, 2739, 2731, 2736, 2735, 2731, 2732, 2736, 2743, 2745, 2743, 2741, 2734, 2733, 2737, 2735, 2739, 2736, 2736, 2728, 2732, 2735, 2729, 2732, 2727, 2724, 2728, 2726, 2724, 2723, 2723, 2723, 2720, 2720, 2727, 2724, 2717, 2726, 2728, 2726, 2723, 2730, 2726, 2732, 2722, 2709, 2707, 2704, 2704, 2710, 2712, 2711, 2715, 2720, 2718, 2724, 2711, 2722, 2716, 2711, 2714, 2714, 2720, 2720, 2720, 2714, 2714, 2720, 2724, 2724, 2723, 2720, 2716, 2714, 2714, 2720, 2725, 2709, 2710, 2702, 2701, 2693, 2695, 2707, 2695, 2690, 2695, 2700, 2705, 2704, 2710, 2709, 2715, 2720, 2718, 2726, 2726, 2712, 2709, 2708, 2710, 2710, 2716, 2709, 2709 },
		/* 4 normal */           { 2987, 2968, 2926, 2897, 2852, 2830, 2790, 2779, 2769, 2742, 2729, 2702, 2670, 2640, 2609, 2585, 2558, 2540, 2549, 2550, 2544, 2538, 2539, 2525, 2516, 2508, 2506, 2503, 2503, 2498, 2490, 2492, 2499, 2498, 2491, 2484, 2482, 2485, 2487, 2494, 2488, 2490, 2487, 2492, 2491, 2490, 2490, 2483, 2480, 2478, 2475, 2479, 2476, 2472, 2473, 2465, 2470, 2483, 2482, 2483, 2484, 2480, 2487, 2488, 2484, 2486, 2487, 2478, 2473, 2472, 2472, 2476, 2474, 2471, 2464, 2470, 2474, 2480, 2482, 2486, 2475, 2479, 2485, 2483, 2488, 2488, 2483, 2480, 2478, 2476, 2475, 2479, 2477, 2478, 2470, 2475, 2478, 2476, 2473, 2472, 2474, 2480, 2473, 2477, 2477, 2477, 2475, 2477, 2483, 2482, 2480, 2478, 2478, 2478, 2479, 2476, 2479, 2477, 2483, 2478, 2484, 2483, 2484, 2495, 2491, 2491, 2493, 2493, 2494, 2487, 2491, 2480, 2479, 2482, 2481, 2483, 2488, 2487, 2485, 2484, 2482, 2490, 2488, 2487, 2479, 2481, 2482, 2490, 2483, 2485, 2486, 2484, 2485, 2493, 2498, 2497, 2492, 2489, 2492, 2500, 2503, 2503, 2505, 2499, 2499, 2504, 2502, 2505, 2497, 2496, 2494, 2495, 2502, 2498, 2500, 2500, 2497, 2497, 2498, 2503, 2503, 2498, 2500, 2497, 2500, 2499, 2498, 2500, 2499, 2498, 2498, 2504, 2496, 2489, 2489, 2484, 2493, 2492, 2487, 2492, 2487, 2493, 2485, 2485, 2492, 2491, 2486, 2486, 2489, 2491, 2492, 2499, 2498, 2491, 2493, 2493, 2488, 2494, 2493, 2477, 2482, 2489, 2490, 2484, 2476, 2473, 2470, 2474, 2477, 2482, 2481, 2476, 2477, 2484, 2484, 2486, 2485, 2480, 2484, 2483, 2489, 2492, 2494, 2499, 2491, 2498, 2490, 2495, 2495, 2491, 2486, 2487, 2489, 2494, 2491, 2490, 2483, 2479, 2482, 2488, 2482, 2481, 2475, 2474, 2471, 2467, 2470, 2474, 2473, 2466, 2469, 2475, 2479, 2479, 2474, 2472, 2473, 2472, 2475, 2481, 2486, 2481, 2469, 2480, 2480, 2479, 2478, 2475, 2470, 2469, 2475, 2475, 2473, 2469, 2467, 2468, 2471, 2472, 2468, 2468, 2472, 2471, 2474, 2477, 2482, 2484, 2477, 2480, 2484, 2485, 2485, 2486, 2485, 2492, 2492, 2487, 2486, 2481, 2475, 2468, 2471, 2478, 2478, 2477, 2476, 2478, 2483, 2484, 2483, 2486, 2484, 2467, 2473, 2475, 2474, 2486, 2472, 2472, 2477, 2482, 2483, 2489, 2495, 2490, 2483, 2484, 2490, 2492, 2496, 2493, 2481, 2482, 2484, 2491, 2487, 2489, 2486, 2477, 2479, 2486, 2485, 2490, 2487, 2487, 2485, 2493, 2494, 2497, 2488, 2479, 2483, 2487, 2487, 2484, 2492, 2484, 2485, 2485, 2480, 2487, 2481, 2483, 2482, 2488, 2491, 2483, 2485, 2488, 2489, 2487, 2495, 2496, 2494, 2498, 2499, 2502, 2511, 2505, 2500, 2504, 2504, 2506, 2505, 2501, 2492, 2488, 2483, 2478, 2483, 2487, 2484, 2480, 2484, 2483, 2495, 2494, 2496, 2485, 2496, 2495, 2510, 2512, 2508, 2509, 2509, 2511, 2513, 2517, 2514, 2513, 2508, 2503, 2510, 2509, 2499, 2500, 2497, 2496, 2497, 2497, 2502, 2502, 2508, 2511, 2501, 2505, 2498, 2493, 2487, 2486, 2476, 2474, 2473, 2472, 2467, 2467, 2477, 2473, 2482, 2481, 2477, 2475, 2478, 2484, 2486, 2486, 2488, 2478, 2466, 2452, 2448, 2435, 2429, 2424, 2418, 2417, 2420, 2420, 2423, 2416, 2418, 2428, 2432, 2433, 2436, 2440, 2444, 2445, 2453, 2457, 2458, 2458, 2472, 2483, 2500, 2505, 2497, 2510, 2516, 2523, 2529, 2529, 2533, 2528, 2522, 2523, 2524, 2523, 2522, 2518, 2511, 2512, 2510, 2507, 2503, 2490, 2483, 2481, 2479, 2483, 2471, 2462, 2453, 2457, 2455, 2451, 2451, 2447, 2442, 2444, 2447, 2445, 2440, 2442, 2437, 2434, 2428, 2426, 2421, 2423, 2423, 2430, 2430, 2431, 2435, 2434, 2427, 2428, 2436, 2430 },
		/* 5 hole */             { 3219, 3155, 3111, 3075, 3040, 3023, 3005, 2990, 2936, 2896, 2839, 2805, 2760, 2731, 2701, 2685, 2667, 2637, 2620, 2609, 2589, 2571, 2558, 2545, 2531, 2516, 2513, 2519, 2514, 2511, 2510, 2508, 2504, 2492, 2492, 2490, 2491, 2489, 2474, 2476, 2477, 2483, 2485, 2483, 2480, 2482, 2483, 2480, 2482, 2479, 2477, 2470, 2468, 2468, 2469, 2482, 2477, 2473, 2474, 2473, 2473, 2474, 2474, 2467, 2469, 2470, 2472, 2474, 2475, 2470, 2470, 2470, 2471, 2465, 2470, 2474, 2472, 2469, 2465, 2476, 2475, 2476, 2466, 2468, 2470, 2464, 2468, 2475, 2476, 2472, 2466, 2467, 2469, 2472, 2475, 2478, 2474, 2470, 2475, 2474, 2473, 2476, 2474, 2467, 2468, 2464, 2463, 2468, 2472, 2466, 2463, 2463, 2462, 2459, 2462, 2465, 2463, 2464, 2457, 2456, 2461, 2473, 2468, 2470, 2467, 2471, 2466, 2468, 2466, 2463, 2461, 2459, 2459, 2463, 2466, 2468, 2469, 2464, 2464, 2466, 2465, 2468, 2469, 2472, 2459, 2462, 2467, 2466, 2466, 2463, 2466, 2467, 2468, 2467, 2466, 2471, 2468, 2468, 2465, 2465, 2472, 2477, 2471, 2468, 2467, 2462, 2464, 2467, 2467, 2465, 2465, 2461, 2460, 2468, 2470, 2473, 2467, 2460, 2463, 2464, 2464, 2462, 2465, 2463, 2454, 2457, 2463, 2467, 2467, 2472, 2476, 2475, 2473, 2476, 2477, 2477, 2472, 2463, 2461, 2463, 2470, 2476, 2477, 2470, 2478, 2471, 2470, 2467, 2474, 2466, 2459, 2465, 2462, 2471, 2476, 2478, 2476, 2473, 2466, 2465, 2463, 2468, 2476, 2472, 2470, 2464, 2463, 2463, 2462, 2456, 2457, 2457, 2446, 2446, 2439, 2437, 2427, 2410, 2398, 2391, 2381, 2375, 2367, 3567, 3555, 3559, 3553, 3546, 3543, 3534, 3525, 3525, 3516, 3519, 3517, 3521, 3514, 3513, 3511, 3512, 3517, 3511, 3510, 3507, 3505, 3507, 3509, 3514, 3513, 3507, 3503, 3506, 3506, 3501, 3507, 3506, 3500, 3496, 3498, 3498, 3502, 3506, 3503, 3501, 3498, 3502, 3497, 3504, 3505, 3505, 3495, 3494, 3497, 3501, 3502, 3501, 3497, 3501, 3499, 3501, 3498, 3504, 3505, 3501, 3501, 3496, 3500, 3498, 3501, 3503, 3496, 3497, 3499, 3501, 3500, 3502, 3497, 3492, 3494, 3497, 3501, 3500, 3498, 3500, 3497, 3501, 3503, 3505, 3501, 3503, 3498, 3495, 3501, 3509, 3508, 3506, 3503, 3506, 3502, 3501, 3505, 3502, 3497, 3496, 3498, 3499, 3499, 3505, 3501, 3500, 3501, 3503, 3499, 3502, 3495, 3497, 3492, 3497, 3501, 3501, 3501, 3502, 3498, 3498, 3500, 3507, 3502, 3502, 3500, 3497, 3499, 3499, 3501, 3499, 3501, 3501, 3503, 3500, 3501, 3502, 3502, 3502, 3497, 3498, 3495, 3500, 3502, 3500, 3501, 3502, 3497, 3492, 3500, 3502, 3498, 3495, 3491, 3489, 3492, 3500, 3508, 3500, 3499, 3498, 3496, 3500, 3498, 3500, 3498, 3496, 3501, 3502, 3504, 3507, 3509, 3512, 3513, 3516, 3517, 3520, 3523, 3532, 3535, 3544, 3558, 3561, 3568, 3576, 3575, 3572, 3573, 3575, 3578, 3571, 3558, 3541, 3527, 3513, 3505, 3481, 3460, 3441, 3428, 3419, 3407, 3399, 3392, 3381, 3366, 3359, 3356, 3336, 3308, 3254, 3161, 3081, 2439, 2407, 2377, 2362, 2353, 2347, 2356, 2359, 2366, 2371, 2374, 2385, 2401, 2422, 2428, 2433, 2452, 2457, 2461, 2484, 2495, 2503, 2498, 2490, 2490, 2486, 2478, 2478, 2479, 2478, 2471, 2467, 2471, 2474, 2477, 2471, 2472, 2475, 2473, 2467, 2470, 2468, 2471, 2468, 2468, 2465, 2466, 2468, 2468, 2465, 2465, 2464, 2461, 2466, 2466, 2461, 2459, 2457, 2462, 2465, 2473, 2470, 2469, 2466, 2464, 2462, 2471, 2474, 2466, 2457, 2463, 2468, 2472, 2465, 2473, 2465, 2466, 2463, 2464, 2468, 2462, 2462, 2457, 2454, 2455, 2458, 2459, 2462, 2457, 2457, 2456, 2463, 2463, 2469 },
		/* 6 sunshine */         { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2816, 2817, 2819, 2816, 2818, 2816, 2816, 2814, 2817, 2815, 2820, 2817, 2818, 2817, 2818, 2819, 2817, 2816, 2813, 2815, 2813, 2813, 2814, 2815, 2815, 2816, 2813, 2812, 2812, 2810, 2812, 2811, 2812, 2811, 2810, 2810, 2807, 2808, 2809, 2810, 2811, 2813, 2813, 2809, 2814, 2815, 2818, 2814, 2812, 2815, 2815, 2816, 2814, 2811, 2808, 2813, 2809, 2806, 2806, 2809, 2812, 2813, 2816, 2819, 2814, 2817, 2819, 2819, 2818, 2815, 2813, 2812, 2815, 2817, 2812, 2812, 2810, 2809, 2805, 2806, 2807, 2805, 2810, 2811, 2811, 2813, 2816, 2814, 2816, 2813, 2814, 2814, 2816, 2818, 2819, 2820, 2821, 2817, 2818, 2818, 2818, 2817, 2818, 2819, 2819, 2821, 2820, 2816, 2814, 2814, 2814, 2809, 2810, 2808, 2804, 2807, 2806, 2807, 2808, 2806, 2809, 2810, 2811, 2809, 2806, 2810, 2811, 2810, 2807, 2809, 2811, 2815, 2814, 2814, 2812, 2813, 2810, 2812, 2812, 2812, 2810, 2811, 2811, 2810, 2810, 2811, 2811, 2809, 2812, 2810, 2812, 2811, 2812, 2810, 2811, 2810, 2806, 2807, 2810, 2811, 2809, 2807, 2809, 2811, 2810, 2808, 2809, 2814, 2814, 2816, 2814, 2813, 2820, 2819, 2816, 2813, 2813, 2815, 2814, 2811, 2807, 2807, 2809, 2809, 2808, 2809, 2811, 2813, 2815, 2815, 2816, 2813, 2814, 2814, 2814, 2813, 2810, 2812, 2812, 2812, 2813, 2818, 2815, 2818, 2819, 2821, 2818, 2816, 2813, 2812, 2810, 2810, 2809, 2809, 2810, 2810, 2811, 2807, 2807, 2807, 2808, 2810, 2807, 2808, 2806, 2808, 2809, 2810, 2809, 2810, 2810, 2812, 2813, 2811, 2814, 2816, 2814, 2810, 2810, 2812, 2811, 2811, 2815, 2813, 2812, 2810, 2812, 2813, 2813, 2809, 2810, 2809, 2808, 2804, 2805, 2804, 2804, 2803, 2805, 2807, 2807, 2808, 2810, 2812, 2811, 2813, 2810, 2815, 2812, 2812, 2809, 2807, 2807, 2809, 2810, 2809, 2808, 2805, 2807, 2806, 2806, 2806, 2806, 2806, 2805, 2807, 2808, 2805, 2807, 2805, 2806, 2805, 2806, 2810, 2807, 2805, 2806, 2807, 2807, 2802, 2800, 2806, 2807, 2804, 2805, 2807, 2805, 2804, 2802, 2802, 2800, 2803, 2801, 2802, 2804, 2802, 2801, 2802, 2803, 2804, 2802, 2801, 2805, 2809, 2810, 2809, 2808, 2810, 2807, 2809, 2809, 2808, 2810, 2810, 2808, 2813, 2818, 2816, 2817, 2815, 2814, 2812, 2811, 2810, 2810, 2809, 2808, 2803, 2806, 2809, 2808, 2806, 2809, 2807, 2809, 2810, 2805, 2803, 2805, 2805, 2809, 2806, 2809, 2809, 2813, 2814, 2817, 2818, 2816, 2816, 2817, 2821, 2815, 2815, 2817, 2817, 2813, 2812, 2812, 2809, 2814, 2812, 2812, 2812, 2818, 2812, 2815, 2812, 2812, 2812, 2805, 2809, 2811, 2811, 2812, 2815, 2812, 2812, 2810, 2813, 2810, 2809, 2811, 2813, 2809, 2811, 2809, 2811, 2811, 2806, 2804, 2807, 2808, 2808, 2804, 2804, 2807, 2807, 2804, 2804, 2803, 2804, 2804, 2806, 2803, 2800, 2802, 2800, 2799, 2802, 2805, 2803, 2809, 2808, 2808, 2803, 2807, 2806, 2807, 2807, 2803, 2803, 2804, 2806, 2810, 2807, 2805, 2806, 2811, 2816, 2815, 2812, 2813, 2814, 2815, 2815, 2815, 2818, 2816, 2820, 2820, 2820, 2818, 2815, 2814, 2811, 2812, 2813, 2811, 2810, 2805, 2812, 2809, 2809, 2807, 2812, 2812, 2815, 2815, 2811, 2813, 2813, 2813, 2813, 2815, 2816, 2818, 2818, 2814, 2816, 2816, 2811, 2813, 2813, 2815, 2813, 2818, 2818, 2819, 2813, 2813, 2816, 2815, 2809, 2811, 2813, 2811, 2810, 2813, 2811, 2814, 2813, 2816, 2813, 2815, 2811, 2812, 2806, 2805, 2801, 2802, 2805, 2803, 2805, 2803, 2805, 2805, 2804, 2806, 2806, 2804, 2803, 2803, 2805, 2804, 2807, 2809, 2808, 2810 },
		/* 7 black_beauty */     { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2816, 2817, 2819, 2816, 2818, 2816, 2816, 2814, 2817, 2815, 2820, 2817, 2818, 2817, 2818, 2819, 2817, 2816, 2813, 2815, 2813, 2813, 2814, 2815, 2815, 2816, 2813, 2812, 2812, 2810, 2812, 2811, 2812, 2811, 2810, 2810, 2807, 2808, 2809, 2810, 2811, 2813, 2813, 2809, 2814, 2815, 2818, 2814, 2812, 2815, 2815, 2816, 2814, 2811, 2808, 2813, 2809, 2806, 2806, 2809, 2812, 2813, 2816, 2819, 2814, 2817, 2819, 2819, 2818, 2815, 2813, 2812, 2815, 2817, 2812, 2812, 2810, 2809, 2805, 2806, 2807, 2805, 2810, 2811, 2811, 2813, 2816, 2814, 2816, 2813, 2814, 2814, 2816, 2818, 2819, 2820, 2821, 2817, 2818, 2818, 2818, 2817, 2818, 2819, 2819, 2821, 2820, 2816, 2814, 2814, 2814, 2809, 2810, 2808, 2804, 2807, 2806, 2807, 2808, 2806, 2809, 2810, 2811, 2809, 2806, 2810, 2811, 2810, 2807, 2809, 2811, 2815, 2814, 2814, 2812, 2813, 2810, 2812, 2812, 2812, 2810, 2811, 2811, 2810, 2810, 2811, 2811, 2809, 2812, 2810, 2812, 2811, 2812, 2810, 2811, 2810, 2806, 2807, 2810, 2811, 2809, 2807, 2809, 2811, 2810, 2808, 2809, 2814, 2814, 2816, 2814, 2813, 2820, 2819, 2816, 2813, 2813, 2815, 2814, 2811, 2807, 2807, 2809, 2809, 2808, 2809, 2811, 2813, 2815, 2815, 2816, 2813, 2814, 2814, 2814, 2813, 2810, 2812, 2812, 2812, 2813, 2818, 2815, 2818, 2819, 2821, 2818, 2816, 2813, 2812, 2810, 2810, 2809, 2809, 2810, 2810, 2811, 2807, 2807, 2807, 2808, 2810, 2807, 2808, 2806, 2808, 2809, 2810, 2809, 2810, 2810, 2812, 2813, 2811, 2814, 2816, 2814, 2810, 2810, 2812, 2811, 2811, 2815, 2813, 2812, 2810, 2812, 2813, 2813, 2809, 2810, 2809, 2808, 2804, 2805, 2804, 2804, 2803, 2805, 2807, 2807, 2808, 2810, 2812, 2811, 2813, 2810, 2815, 2812, 2812, 2809, 2807, 2807, 2809, 2810, 2809, 2808, 2805, 2807, 2806, 2806, 2806, 2806, 2806, 2805, 2807, 2808, 2805, 2807, 2805, 2806, 2805, 2806, 2810, 2807, 2805, 2806, 2807, 2807, 2802, 2800, 2806, 2807, 2804, 2805, 2807, 2805, 2804, 2802, 2802, 2800, 2803, 2801, 2802, 2804, 2802, 2801, 2802, 2803, 2804, 2802, 2801, 2805, 2809, 2810, 2809, 2808, 2810, 2807, 2809, 2809, 2808, 2810, 2810, 2808, 2813, 2818, 2816, 2817, 2815, 2814, 2812, 2811, 2810, 2810, 2809, 2808, 2803, 2806, 2809, 2808, 2806, 2809, 2807, 2809, 2810, 2805, 2803, 2805, 2805, 2809, 2806, 2809, 2809, 2813, 2814, 2817, 2818, 2816, 2816, 2817, 2821, 2815, 2815, 2817, 2817, 2813, 2812, 2812, 2809, 2814, 2812, 2812, 2812, 2818, 2812, 2815, 2812, 2812, 2812, 2805, 2809, 2811, 2811, 2812, 2815, 2812, 2812, 2810, 2813, 2810, 2809, 2811, 2813, 2809, 2811, 2809, 2811, 2811, 2806, 2804, 2807, 2808, 2808, 2804, 2804, 2807, 2807, 2804, 2804, 2803, 2804, 2804, 2806, 2803, 2800, 2802, 2800, 2799, 2802, 2805, 2803, 2809, 2808, 2808, 2803, 2807, 2806, 2807, 2807, 2803, 2803, 2804, 2806, 2810, 2807, 2805, 2806, 2811, 2816, 2815, 2812, 2813, 2814, 2815, 2815, 2815, 2818, 2816, 2820, 2820, 2820, 2818, 2815, 2814, 2811, 2812, 2813, 2811, 2810, 2805, 2812, 2809, 2809, 2807, 2812, 2812, 2815, 2815, 2811, 2813, 2813, 2813, 2813, 2815, 2816, 2818, 2818, 2814, 2816, 2816, 2811, 2813, 2813, 2815, 2813, 2818, 2818, 2819, 2813, 2813, 2816, 2815, 2809, 2811, 2813, 2811, 2810, 2813, 2811, 2814, 2813, 2816, 2813, 2815, 2811, 2812, 2806, 2805, 2801, 2802, 2805, 2803, 2805, 2803, 2805, 2805, 2804, 2806, 2806, 2804, 2803, 2803, 2805, 2804, 2807, 2809, 2808, 2810 },
		/* 8 white_innoccence */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2816, 2817, 2819, 2816, 2818, 2816, 2816, 2814, 2817, 2815, 2820, 2817, 2818, 2817, 2818, 2819, 2817, 2816, 2813, 2815, 2813, 2813, 2814, 2815, 2815, 2816, 2813, 2812, 2812, 2810, 2812, 2811, 2812, 2811, 2810, 2810, 2807, 2808, 2809, 2810, 2811, 2813, 2813, 2809, 2814, 2815, 2818, 2814, 2812, 2815, 2815, 2816, 2814, 2811, 2808, 2813, 2809, 2806, 2806, 2809, 2812, 2813, 2816, 2819, 2814, 2817, 2819, 2819, 2818, 2815, 2813, 2812, 2815, 2817, 2812, 2812, 2810, 2809, 2805, 2806, 2807, 2805, 2810, 2811, 2811, 2813, 2816, 2814, 2816, 2813, 2814, 2814, 2816, 2818, 2819, 2820, 2821, 2817, 2818, 2818, 2818, 2817, 2818, 2819, 2819, 2821, 2820, 2816, 2814, 2814, 2814, 2809, 2810, 2808, 2804, 2807, 2806, 2807, 2808, 2806, 2809, 2810, 2811, 2809, 2806, 2810, 2811, 2810, 2807, 2809, 2811, 2815, 2814, 2814, 2812, 2813, 2810, 2812, 2812, 2812, 2810, 2811, 2811, 2810, 2810, 2811, 2811, 2809, 2812, 2810, 2812, 2811, 2812, 2810, 2811, 2810, 2806, 2807, 2810, 2811, 2809, 2807, 2809, 2811, 2810, 2808, 2809, 2814, 2814, 2816, 2814, 2813, 2820, 2819, 2816, 2813, 2813, 2815, 2814, 2811, 2807, 2807, 2809, 2809, 2808, 2809, 2811, 2813, 2815, 2815, 2816, 2813, 2814, 2814, 2814, 2813, 2810, 2812, 2812, 2812, 2813, 2818, 2815, 2818, 2819, 2821, 2818, 2816, 2813, 2812, 2810, 2810, 2809, 2809, 2810, 2810, 2811, 2807, 2807, 2807, 2808, 2810, 2807, 2808, 2806, 2808, 2809, 2810, 2809, 2810, 2810, 2812, 2813, 2811, 2814, 2816, 2814, 2810, 2810, 2812, 2811, 2811, 2815, 2813, 2812, 2810, 2812, 2813, 2813, 2809, 2810, 2809, 2808, 2804, 2805, 2804, 2804, 2803, 2805, 2807, 2807, 2808, 2810, 2812, 2811, 2813, 2810, 2815, 2812, 2812, 2809, 2807, 2807, 2809, 2810, 2809, 2808, 2805, 2807, 2806, 2806, 2806, 2806, 2806, 2805, 2807, 2808, 2805, 2807, 2805, 2806, 2805, 2806, 2810, 2807, 2805, 2806, 2807, 2807, 2802, 2800, 2806, 2807, 2804, 2805, 2807, 2805, 2804, 2802, 2802, 2800, 2803, 2801, 2802, 2804, 2802, 2801, 2802, 2803, 2804, 2802, 2801, 2805, 2809, 2810, 2809, 2808, 2810, 2807, 2809, 2809, 2808, 2810, 2810, 2808, 2813, 2818, 2816, 2817, 2815, 2814, 2812, 2811, 2810, 2810, 2809, 2808, 2803, 2806, 2809, 2808, 2806, 2809, 2807, 2809, 2810, 2805, 2803, 2805, 2805, 2809, 2806, 2809, 2809, 2813, 2814, 2817, 2818, 2816, 2816, 2817, 2821, 2815, 2815, 2817, 2817, 2813, 2812, 2812, 2809, 2814, 2812, 2812, 2812, 2818, 2812, 2815, 2812, 2812, 2812, 2805, 2809, 2811, 2811, 2812, 2815, 2812, 2812, 2810, 2813, 2810, 2809, 2811, 2813, 2809, 2811, 2809, 2811, 2811, 2806, 2804, 2807, 2808, 2808, 2804, 2804, 2807, 2807, 2804, 2804, 2803, 2804, 2804, 2806, 2803, 2800, 2802, 2800, 2799, 2802, 2805, 2803, 2809, 2808, 2808, 2803, 2807, 2806, 2807, 2807, 2803, 2803, 2804, 2806, 2810, 2807, 2805, 2806, 2811, 2816, 2815, 2812, 2813, 2814, 2815, 2815, 2815, 2818, 2816, 2820, 2820, 2820, 2818, 2815, 2814, 2811, 2812, 2813, 2811, 2810, 2805, 2812, 2809, 2809, 2807, 2812, 2812, 2815, 2815, 2811, 2813, 2813, 2813, 2813, 2815, 2816, 2818, 2818, 2814, 2816, 2816, 2811, 2813, 2813, 2815, 2813, 2818, 2818, 2819, 2813, 2813, 2816, 2815, 2809, 2811, 2813, 2811, 2810, 2813, 2811, 2814, 2813, 2816, 2813, 2815, 2811, 2812, 2806, 2805, 2801, 2802, 2805, 2803, 2805, 2803, 2805, 2805, 2804, 2806, 2806, 2804, 2803, 2803, 2805, 2804, 2807, 2809, 2808, 2810 },
		/* 9 deep_blue */        { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2816, 2817, 2819, 2816, 2818, 2816, 2816, 2814, 2817, 2815, 2820, 2817, 2818, 2817, 2818, 2819, 2817, 2816, 2813, 2815, 2813, 2813, 2814, 2815, 2815, 2816, 2813, 2812, 2812, 2810, 2812, 2811, 2812, 2811, 2810, 2810, 2807, 2808, 2809, 2810, 2811, 2813, 2813, 2809, 2814, 2815, 2818, 2814, 2812, 2815, 2815, 2816, 2814, 2811, 2808, 2813, 2809, 2806, 2806, 2809, 2812, 2813, 2816, 2819, 2814, 2817, 2819, 2819, 2818, 2815, 2813, 2812, 2815, 2817, 2812, 2812, 2810, 2809, 2805, 2806, 2807, 2805, 2810, 2811, 2811, 2813, 2816, 2814, 2816, 2813, 2814, 2814, 2816, 2818, 2819, 2820, 2821, 2817, 2818, 2818, 2818, 2817, 2818, 2819, 2819, 2821, 2820, 2816, 2814, 2814, 2814, 2809, 2810, 2808, 2804, 2807, 2806, 2807, 2808, 2806, 2809, 2810, 2811, 2809, 2806, 2810, 2811, 2810, 2807, 2809, 2811, 2815, 2814, 2814, 2812, 2813, 2810, 2812, 2812, 2812, 2810, 2811, 2811, 2810, 2810, 2811, 2811, 2809, 2812, 2810, 2812, 2811, 2812, 2810, 2811, 2810, 2806, 2807, 2810, 2811, 2809, 2807, 2809, 2811, 2810, 2808, 2809, 2814, 2814, 2816, 2814, 2813, 2820, 2819, 2816, 2813, 2813, 2815, 2814, 2811, 2807, 2807, 2809, 2809, 2808, 2809, 2811, 2813, 2815, 2815, 2816, 2813, 2814, 2814, 2814, 2813, 2810, 2812, 2812, 2812, 2813, 2818, 2815, 2818, 2819, 2821, 2818, 2816, 2813, 2812, 2810, 2810, 2809, 2809, 2810, 2810, 2811, 2807, 2807, 2807, 2808, 2810, 2807, 2808, 2806, 2808, 2809, 2810, 2809, 2810, 2810, 2812, 2813, 2811, 2814, 2816, 2814, 2810, 2810, 2812, 2811, 2811, 2815, 2813, 2812, 2810, 2812, 2813, 2813, 2809, 2810, 2809, 2808, 2804, 2805, 2804, 2804, 2803, 2805, 2807, 2807, 2808, 2810, 2812, 2811, 2813, 2810, 2815, 2812, 2812, 2809, 2807, 2807, 2809, 2810, 2809, 2808, 2805, 2807, 2806, 2806, 2806, 2806, 2806, 2805, 2807, 2808, 2805, 2807, 2805, 2806, 2805, 2806, 2810, 2807, 2805, 2806, 2807, 2807, 2802, 2800, 2806, 2807, 2804, 2805, 2807, 2805, 2804, 2802, 2802, 2800, 2803, 2801, 2802, 2804, 2802, 2801, 2802, 2803, 2804, 2802, 2801, 2805, 2809, 2810, 2809, 2808, 2810, 2807, 2809, 2809, 2808, 2810, 2810, 2808, 2813, 2818, 2816, 2817, 2815, 2814, 2812, 2811, 2810, 2810, 2809, 2808, 2803, 2806, 2809, 2808, 2806, 2809, 2807, 2809, 2810, 2805, 2803, 2805, 2805, 2809, 2806, 2809, 2809, 2813, 2814, 2817, 2818, 2816, 2816, 2817, 2821, 2815, 2815, 2817, 2817, 2813, 2812, 2812, 2809, 2814, 2812, 2812, 2812, 2818, 2812, 2815, 2812, 2812, 2812, 2805, 2809, 2811, 2811, 2812, 2815, 2812, 2812, 2810, 2813, 2810, 2809, 2811, 2813, 2809, 2811, 2809, 2811, 2811, 2806, 2804, 2807, 2808, 2808, 2804, 2804, 2807, 2807, 2804, 2804, 2803, 2804, 2804, 2806, 2803, 2800, 2802, 2800, 2799, 2802, 2805, 2803, 2809, 2808, 2808, 2803, 2807, 2806, 2807, 2807, 2803, 2803, 2804, 2806, 2810, 2807, 2805, 2806, 2811, 2816, 2815, 2812, 2813, 2814, 2815, 2815, 2815, 2818, 2816, 2820, 2820, 2820, 2818, 2815, 2814, 2811, 2812, 2813, 2811, 2810, 2805, 2812, 2809, 2809, 2807, 2812, 2812, 2815, 2815, 2811, 2813, 2813, 2813, 2813, 2815, 2816, 2818, 2818, 2814, 2816, 2816, 2811, 2813, 2813, 2815, 2813, 2818, 2818, 2819, 2813, 2813, 2816, 2815, 2809, 2811, 2813, 2811, 2810, 2813, 2811, 2814, 2813, 2816, 2813, 2815, 2811, 2812, 2806, 2805, 2801, 2802, 2805, 2803, 2805, 2803, 2805, 2805, 2804, 2806, 2806, 2804, 2803, 2803, 2805, 2804, 2807, 2809, 2808, 2810 }
};

Height_Measurement::Height_Measurement(){
			last_type = 0;
			is_stopped = false;
			height_diff = 0;
};

void Height_Measurement::execute(void*){
    /* Zugriffsrechte von QNX fuer diesen Thread, auf die Hardware erbitten. */
    if( ThreadCtl(_NTO_TCTL_IO_PRIV,0) == -1 ){
        cout << "Can't get Hardware access, therefore can't do anything." << endl;
    }

	struct _pulse pulse;
	uint32_t msg;
	uint32_t level;
	struct height_array ha;
	Height_sensor* height_sensor = Height_sensor::get_instance();
	height_diff = (height_sensor -> get_height()) - INIT_HEIGHT;
	while(1){
		level = height_sensor -> get_height();
		if(level < GROUND_HEIGHT){
			ha = get_height_array();
			
			// !!!!!!--------!!!!!!!!!!
			// for profile measurement
				cout << "[ ";
				for(msg = 0; msg < ha.length; msg++){
					cout << ha.array[msg] << ", ";
				}
				cout << "]" << endl;
			// !!!!!!--------!!!!!!!!!!
			
			if(ha.length >= MIN_LENGTH){
				last_type = compare_arrays(ha);
				msg = (last_type == UNDEFINED ? INVALID_PUK_TYPE_ID_E : HM_DONE_EVENT_ID_E);
				MsgSendPulse(3, -1, 5, msg);
			}
		} 
	}
}

void Height_Measurement::shutdown(){
	// ignore
}

void  Height_Measurement::set_motor_speed(uint32_t speed){
	is_stopped = (speed == STOPPED);
}

uint32_t Height_Measurement::get_type(void){
	return last_type;
}

height_array Height_Measurement::get_height_array(void){
	Height_sensor* height_sensor = Height_sensor::get_instance();
	struct _pulse pulse;
	std::vector<uint32_t> height_vector;
	bool in_measurement = true;
	uint32_t length_counter = 0;
	uint32_t level;
	struct height_array ha;
	do{
		level = height_sensor -> get_height();
		if(++length_counter >= MAX_LENGTH || level <= MAX_HEIGHT){
			ha.length = 1;
			height_vector.clear();
			height_vector.push_back(INVALID_PUK_TYPE_ID_E);
			ha.array = &height_vector[0];
			MsgSendPulse(3, -1, 5, INVALID_PUK_TYPE_ID_E);
			return ha;
		}else if(level >= GROUND_HEIGHT){
			in_measurement = false;
		}else{
			height_vector.push_back(level);
		}
		if(length_counter == MIN_LENGTH ){
			MsgSendPulse(3, -1, 5, HM_START_EVENT_ID_E);
		}
		while(is_stopped);
	}while(in_measurement);
	if(!height_vector.empty()){
		ha.length = height_vector.size();
		ha.array = &height_vector[0];
		return ha;
	}
	ha.length = 1;
	height_vector.clear();
	height_vector.push_back(UNDEFINED);
	ha.array = &height_vector[0];
	return ha;
}

uint32_t Height_Measurement::compare_arrays(height_array ha){
	uint32_t i;
	uint32_t j;
	uint32_t sum;
	int32_t temp;

	if(ha.length < PROTOTYPE_LENGTH + CUT_OFF_FRONT){
		return UNDEFINED;
	}
	for(j = 0; j < SUM_PUKS; j++){
		sum = 0;
		for(i = 0; i < PROTOTYPE_LENGTH; i++){
			temp = (int32_t) ha.array[i + CUT_OFF_FRONT] - (int32_t) profiles[j][i];
			if(temp < 0){
				temp *= -1;
			}
			sum += temp;
		}
		cout << i << " sum: " << sum << endl;
		if(sum <= SMALLEST_ABS_ERROR){
			j = (j < SUM_IC_WM ? 0 : j);
			return j;
		}
	}
	return UNDEFINED;
}
